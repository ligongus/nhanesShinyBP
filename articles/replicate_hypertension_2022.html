<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="cardioStatsUSA">
<title>Replicating analysis from Muntner et al, 2022 • cardioStatsUSA</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.3/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.3/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Replicating analysis from Muntner et al, 2022">
<meta property="og:description" content="cardioStatsUSA">
<meta property="og:image" content="https://jhs-hwg.github.io/cardioStatsUSA/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">cardioStatsUSA</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-results">Results</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-results">
    <a class="dropdown-item" href="../articles/hypertension.html">Hypertension</a>
    <a class="dropdown-item" href="../articles/bp_meds.html">Antihypertensive medication use</a>
    <a class="dropdown-item" href="../articles/bp_control.html">Blood pressure control</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../articles/cardioStatsUSA.html">Get started</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-technical-stuff">Technical stuff</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-technical-stuff">
    <a class="dropdown-item" href="../reference/index.html">Documentation</a>
    <a class="dropdown-item" href="../articles/replicate_nchs_2017.html">Replicating NCHS Data Brief No. 289</a>
    <a class="dropdown-item" href="../articles/replicate_jama_2020.html">Replicating Muntner et al, 2020</a>
    <a class="dropdown-item" href="../articles/replicate_hypertension_2022.html">Replicating Muntner et al, 2022</a>
    <a class="dropdown-item" href="../articles/modules.html">Extending the application</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/jhs-hwg/cardioStatsUSA" aria-label="Github">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Replicating analysis from Muntner et al, 2022</h1>
            
      
      
      <div class="d-none name"><code>replicate_hypertension_2022.Rmd</code></div>
    </div>

    
    
<p>This article shows how <code>cardioStatsUSA</code> can replicate
results from a prior study in the <em>Hypertension</em> journal. The
results can be replicated with our shiny application or with code.</p>
<div class="section level2">
<h2 id="replicate-with-shiny-application">Replicate with shiny application<a class="anchor" aria-label="anchor" href="#replicate-with-shiny-application"></a>
</h2>
<p>The video below shows how Table S2 can be replicated using our web
application.</p>
<p><strong>ADD VIDEO</strong></p>
</div>
<div class="section level2">
<h2 id="replicate-with-code">Replicate with code<a class="anchor" aria-label="anchor" href="#replicate-with-code"></a>
</h2>
<p>The code in this section does exactly what the videos above do, and
provides a glimpse of the R code that is used on the back-end of the
shiny application.</p>
</div>
<div class="section level2">
<h2 id="who-is-included-in-this-test">Who is included in this test<a class="anchor" aria-label="anchor" href="#who-is-included-in-this-test"></a>
</h2>
<p>For these tests, we include the same cohort as Muntner et al. Full
details on the inclusion criteria are given in the paper, but here all
that we need to do is subset the data to include rows where
<code>svy_subpop_htn</code> is equal to 1 and limit the survey cycles to
those used in the paper.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">nhanes_subpop_htn</span> <span class="op">&lt;-</span> <span class="va">nhanes_data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span> <span class="va">.</span><span class="op">[</span><span class="va">svy_subpop_htn</span> <span class="op">==</span> <span class="fl">1</span><span class="op">]</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span> <span class="va">.</span><span class="op">[</span><span class="va">svy_year</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"2009-2010"</span>,</span>
<span>                   <span class="st">"2011-2012"</span>,</span>
<span>                   <span class="st">"2013-2014"</span>,</span>
<span>                   <span class="st">"2015-2016"</span>,</span>
<span>                   <span class="st">"2017-2020"</span><span class="op">)</span><span class="op">]</span></span></code></pre></div>
<p>after these exclusions, <code>30630</code> participants are
included.</p>
</div>
<div class="section level2">
<h2 id="age-adjustment">Age adjustment<a class="anchor" aria-label="anchor" href="#age-adjustment"></a>
</h2>
<p>We use direct standardization with the same standard weights as in
Munter et al.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">standard_weights</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">13.5</span>, <span class="fl">45.3</span>, <span class="fl">23.3</span>, <span class="fl">17.8</span><span class="op">)</span></span></code></pre></div>
<p>In most cases, we use <code><a href="../reference/nhanes_summarize.html">nhanes_summarize()</a></code> or
<code><a href="../reference/nhanes_visualize.html">nhanes_visualize()</a></code> when generating results with
<code>cardioStatsUSA</code>. Here, we use the <code>nhanes_design</code>
family of functions. NHANES design functions are lower level functions
that support <code>nhanes_summarize</code> and
<code>nhanes_visualize</code>. Full details on this family can be found
at the help page for [nhanes_design].</p>
</div>
<div class="section level2">
<h2 id="replicating-table-s2">Replicating Table S2<a class="anchor" aria-label="anchor" href="#replicating-table-s2"></a>
</h2>
<p>To reproduce Table S2 from Muntner et al, we use the <code>ds</code>
design object to estimate the proportion of adults with BP control
according to the JNC7 BP guidelines.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">shiny_answers_table_s2_overall</span> <span class="op">&lt;-</span> <span class="va">ds</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span> <span class="fu"><a href="../reference/nhanes_design_summarize.html">nhanes_design_summarize</a></span><span class="op">(</span>outcome_stats <span class="op">=</span> <span class="st">'percentage'</span>,</span>
<span>                         simplify_output <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span> <span class="va">.</span><span class="op">[</span><span class="va">bp_control_140_90</span><span class="op">==</span><span class="st">'Yes'</span><span class="op">]</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span> <span class="va">.</span><span class="op">[</span>, <span class="va">group</span> <span class="op">:=</span> <span class="st">"Overall"</span><span class="op">]</span></span>
<span></span>
<span><span class="va">shiny_answers_table_s2_groups</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span></span>
<span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'demo_age_cat'</span>, <span class="st">'demo_gender'</span><span class="op">)</span>,</span>
<span> <span class="kw">function</span><span class="op">(</span><span class="va">.variable</span><span class="op">)</span><span class="op">{</span></span>
<span>  <span class="va">ds</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>   <span class="fu"><a href="../reference/nhanes_design_update.html">nhanes_design_update</a></span><span class="op">(</span>group_variable <span class="op">=</span> <span class="va">.variable</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>   <span class="fu"><a href="../reference/nhanes_design_summarize.html">nhanes_design_summarize</a></span><span class="op">(</span>outcome_stats <span class="op">=</span> <span class="st">'percentage'</span>,</span>
<span>                           simplify_output <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>   <span class="va">.</span><span class="op">[</span><span class="va">bp_control_140_90</span><span class="op">==</span><span class="st">'Yes'</span><span class="op">]</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>   <span class="fu">setnames</span><span class="op">(</span>old <span class="op">=</span> <span class="va">.variable</span>, new <span class="op">=</span> <span class="st">'group'</span><span class="op">)</span></span>
<span> <span class="op">}</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>Now we can put all of our answers together</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">est_cols</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'estimate'</span>, <span class="st">'ci_lower'</span>, <span class="st">'ci_upper'</span><span class="op">)</span></span>
<span></span>
<span><span class="va">shiny_answers_table_s2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">shiny_answers_table_s2_overall</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">shiny_answers_table_s2_groups</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span> <span class="fu">rbindlist</span><span class="op">(</span>fill <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span> <span class="fu">as.data.table</span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span> <span class="va">.</span><span class="op">[</span>, <span class="fu">.</span><span class="op">(</span><span class="va">svy_year</span>, <span class="va">group</span>, <span class="va">estimate</span>, <span class="va">ci_lower</span>, <span class="va">ci_upper</span><span class="op">)</span><span class="op">]</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span> <span class="va">.</span><span class="op">[</span>, <span class="op">(</span><span class="va">est_cols</span><span class="op">)</span> <span class="op">:=</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="va">.SD</span>, <span class="va">round</span>, digits <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>, .SDcols <span class="op">=</span> <span class="va">est_cols</span><span class="op">]</span></span></code></pre></div>
<p>We also need to get the data from Muntner et al to make sure our
answers match their answers.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">table_s2</span> <span class="op">&lt;-</span> <span class="fu">cardioStatsUSA</span><span class="fu">::</span><span class="va"><a href="../reference/replication.html">muntner_hypertension_2022_table_s2</a></span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span> <span class="va">.</span><span class="op">[</span>, <span class="va">variable</span> <span class="op">:=</span> <span class="cn">NULL</span><span class="op">]</span></span></code></pre></div>
<p>Now put everything together and test that all of our answers
match</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">test_results</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span> hypertension <span class="op">=</span> <span class="va">table_s2</span>,</span>
<span> shiny <span class="op">=</span> <span class="va">shiny_answers_table_s2</span></span>
<span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span> <span class="fu">rbindlist</span><span class="op">(</span>idcol <span class="op">=</span> <span class="st">'source'</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span> <span class="fu">dcast</span><span class="op">(</span><span class="va">svy_year</span> <span class="op">+</span> <span class="va">group</span> <span class="op">~</span> <span class="va">source</span>, value.var <span class="op">=</span> <span class="va">est_cols</span><span class="op">)</span></span></code></pre></div>
<p>take a look at the merged results, you can see estimate_shiny matches
estimate_hypertension in all cells shown.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">test_results</span></span>
<span><span class="co">#&gt;      svy_year    group estimate_hypertension estimate_shiny</span></span>
<span><span class="co">#&gt;  1: 2009-2010  Overall                  53.5           53.5</span></span>
<span><span class="co">#&gt;  2: 2009-2010 18 to 44                  35.5           35.5</span></span>
<span><span class="co">#&gt;  3: 2009-2010 45 to 64                  57.1           57.1</span></span>
<span><span class="co">#&gt;  4: 2009-2010 65 to 74                  59.2           59.2</span></span>
<span><span class="co">#&gt;  5: 2009-2010      75+                  50.3           50.3</span></span>
<span><span class="co">#&gt;  6: 2009-2010    Women                  57.3           57.3</span></span>
<span><span class="co">#&gt;  7: 2009-2010      Men                  50.7           50.7</span></span>
<span><span class="co">#&gt;  8: 2011-2012  Overall                  52.2           52.2</span></span>
<span><span class="co">#&gt;  9: 2011-2012 18 to 44                  42.2           42.2</span></span>
<span><span class="co">#&gt; 10: 2011-2012 45 to 64                  56.2           56.2</span></span>
<span><span class="co">#&gt; 11: 2011-2012 65 to 74                  57.8           57.8</span></span>
<span><span class="co">#&gt; 12: 2011-2012      75+                  42.0           42.0</span></span>
<span><span class="co">#&gt; 13: 2011-2012    Women                  55.2           55.2</span></span>
<span><span class="co">#&gt; 14: 2011-2012      Men                  50.2           50.2</span></span>
<span><span class="co">#&gt; 15: 2013-2014  Overall                  54.1           54.1</span></span>
<span><span class="co">#&gt; 16: 2013-2014 18 to 44                  44.6           44.6</span></span>
<span><span class="co">#&gt; 17: 2013-2014 45 to 64                  57.0           57.0</span></span>
<span><span class="co">#&gt; 18: 2013-2014 65 to 74                  59.2           59.2</span></span>
<span><span class="co">#&gt; 19: 2013-2014      75+                  47.4           47.4</span></span>
<span><span class="co">#&gt; 20: 2013-2014    Women                  57.4           57.4</span></span>
<span><span class="co">#&gt; 21: 2013-2014      Men                  52.1           52.1</span></span>
<span><span class="co">#&gt; 22: 2015-2016  Overall                  48.6           48.6</span></span>
<span><span class="co">#&gt; 23: 2015-2016 18 to 44                  40.0           40.0</span></span>
<span><span class="co">#&gt; 24: 2015-2016 45 to 64                  53.7           53.7</span></span>
<span><span class="co">#&gt; 25: 2015-2016 65 to 74                  51.5           51.5</span></span>
<span><span class="co">#&gt; 26: 2015-2016      75+                  38.2           38.2</span></span>
<span><span class="co">#&gt; 27: 2015-2016    Women                  52.9           52.9</span></span>
<span><span class="co">#&gt; 28: 2015-2016      Men                  46.0           46.0</span></span>
<span><span class="co">#&gt; 29: 2017-2020  Overall                  48.2           48.2</span></span>
<span><span class="co">#&gt; 30: 2017-2020 18 to 44                  40.3           40.3</span></span>
<span><span class="co">#&gt; 31: 2017-2020 45 to 64                  52.0           52.0</span></span>
<span><span class="co">#&gt; 32: 2017-2020 65 to 74                  54.2           54.2</span></span>
<span><span class="co">#&gt; 33: 2017-2020      75+                  36.8           36.9</span></span>
<span><span class="co">#&gt; 34: 2017-2020    Women                  47.9           47.9</span></span>
<span><span class="co">#&gt; 35: 2017-2020      Men                  49.0           49.0</span></span>
<span><span class="co">#&gt;      svy_year    group estimate_hypertension estimate_shiny</span></span>
<span><span class="co">#&gt;     ci_lower_hypertension ci_lower_shiny ci_upper_hypertension ci_upper_shiny</span></span>
<span><span class="co">#&gt;  1:                  50.2           50.2                  56.7           56.7</span></span>
<span><span class="co">#&gt;  2:                  26.8           27.0                  44.2           44.1</span></span>
<span><span class="co">#&gt;  3:                  52.6           52.6                  62.0           61.6</span></span>
<span><span class="co">#&gt;  4:                  54.6           54.7                  63.7           63.6</span></span>
<span><span class="co">#&gt;  5:                  44.1           44.1                  56.5           56.4</span></span>
<span><span class="co">#&gt;  6:                  53.2           53.2                  61.4           61.4</span></span>
<span><span class="co">#&gt;  7:                  47.3           47.3                  54.1           54.1</span></span>
<span><span class="co">#&gt;  8:                  47.7           47.7                  56.7           56.6</span></span>
<span><span class="co">#&gt;  9:                  31.5           31.7                  52.9           52.8</span></span>
<span><span class="co">#&gt; 10:                  49.6           49.7                  62.9           62.8</span></span>
<span><span class="co">#&gt; 11:                  51.1           51.2                  64.5           64.4</span></span>
<span><span class="co">#&gt; 12:                  33.4           33.5                  50.6           50.4</span></span>
<span><span class="co">#&gt; 13:                  49.2           49.3                  61.2           61.1</span></span>
<span><span class="co">#&gt; 14:                  46.0           46.1                  54.4           54.3</span></span>
<span><span class="co">#&gt; 15:                  48.9           49.0                  59.3           59.2</span></span>
<span><span class="co">#&gt; 16:                  38.2           38.3                  50.9           50.8</span></span>
<span><span class="co">#&gt; 17:                  49.8           49.9                  64.2           64.1</span></span>
<span><span class="co">#&gt; 18:                  54.7           54.7                  63.6           63.6</span></span>
<span><span class="co">#&gt; 19:                  38.6           38.8                  56.1           56.0</span></span>
<span><span class="co">#&gt; 20:                  52.3           52.3                  62.5           62.5</span></span>
<span><span class="co">#&gt; 21:                  45.5           45.6                  58.8           58.7</span></span>
<span><span class="co">#&gt; 22:                  44.4           44.5                  52.7           52.7</span></span>
<span><span class="co">#&gt; 23:                  33.9           34.0                  46.1           46.0</span></span>
<span><span class="co">#&gt; 24:                  48.1           48.2                  59.2           59.2</span></span>
<span><span class="co">#&gt; 25:                  44.4           44.5                  58.5           58.4</span></span>
<span><span class="co">#&gt; 26:                  31.7           31.8                  44.8           44.7</span></span>
<span><span class="co">#&gt; 27:                  47.8           47.9                  58.0           58.0</span></span>
<span><span class="co">#&gt; 28:                  41.1           41.1                  51.0           50.9</span></span>
<span><span class="co">#&gt; 29:                  45.7           45.7                  50.8           50.8</span></span>
<span><span class="co">#&gt; 30:                  30.7           30.8                  49.9           49.8</span></span>
<span><span class="co">#&gt; 31:                  47.9           47.9                  56.2           56.1</span></span>
<span><span class="co">#&gt; 32:                  49.3           49.4                  59.0           59.0</span></span>
<span><span class="co">#&gt; 33:                  32.5           32.5                  41.3           41.2</span></span>
<span><span class="co">#&gt; 34:                  44.7           44.7                  51.2           51.2</span></span>
<span><span class="co">#&gt; 35:                  44.8           44.9                  53.3           53.2</span></span>
<span><span class="co">#&gt;     ci_lower_hypertension ci_lower_shiny ci_upper_hypertension ci_upper_shiny</span></span></code></pre></div>
<p>In some cases, we have minor differences due to rounding and/or minor
differences due to a small differences in the study cohorts. To ensure
all of these differences are small enough, we allow a 1% difference in
the boundaries for our test. I.e., |A-B|/ B &lt; 0.01</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tolerance</span> <span class="op">&lt;-</span> <span class="fl">0.01</span></span>
<span></span>
<span><span class="fu">test_that</span><span class="op">(</span></span>
<span> desc <span class="op">=</span> <span class="st">"shiny app matches Table S2 of Hypertension paper"</span>,</span>
<span> code <span class="op">=</span> <span class="op">{</span></span>
<span></span>
<span>  <span class="fu">expect_equal</span><span class="op">(</span><span class="va">test_results</span><span class="op">$</span><span class="va">estimate_hypertension</span>,</span>
<span>               <span class="va">test_results</span><span class="op">$</span><span class="va">estimate_shiny</span>,</span>
<span>               tolerance <span class="op">=</span> <span class="va">tolerance</span><span class="op">)</span></span>
<span></span>
<span>  <span class="fu">expect_equal</span><span class="op">(</span><span class="va">test_results</span><span class="op">$</span><span class="va">ci_lower_hypertension</span>,</span>
<span>               <span class="va">test_results</span><span class="op">$</span><span class="va">ci_lower_shiny</span>,</span>
<span>               tolerance <span class="op">=</span> <span class="va">tolerance</span><span class="op">)</span></span>
<span></span>
<span>  <span class="fu">expect_equal</span><span class="op">(</span><span class="va">test_results</span><span class="op">$</span><span class="va">ci_upper_hypertension</span>,</span>
<span>               <span class="va">test_results</span><span class="op">$</span><span class="va">ci_upper_shiny</span>,</span>
<span>               tolerance <span class="op">=</span> <span class="va">tolerance</span><span class="op">)</span></span>
<span></span>
<span> <span class="op">}</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">Test passed</span> 🥇</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="make-your-own-results">Make your own results<a class="anchor" aria-label="anchor" href="#make-your-own-results"></a>
</h2>
<p>You can find the online application where customized graphs can be
made here: <a href="https://bcjaeger.shinyapps.io/nhanesShinyBP/" class="external-link uri">https://bcjaeger.shinyapps.io/nhanesShinyBP/</a></p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Byron Jaeger, Ligong Chen, Paul Muntner.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
